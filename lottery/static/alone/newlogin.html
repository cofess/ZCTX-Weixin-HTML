<!doctype html>
<html>
<head>
<meta charset=utf-8"utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, minimal-ui" />
<meta name="format-detection" content="telephone=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<title>ç™»å½•</title>
<style type="text/css">
#login{min-height:220px;}
.contact{padding-bottom:20px;}
/*msgå¼¹çª—*/
@-webkit-keyframes boxfade{0%{opacity:0;}20%{opacity:0.8;}80%{opacity:0.8;}100%{opacity:0;}}
@-o-keyframes boxfade{0%{opacity:0;}20%{opacity:0.8;}80%{opacity:0.8;}100%{opacity:0;}}
@-ms-keyframes boxfade{0%{opacity:0;}20%{opacity:0.8;}80%{opacity:0.8;}100%{opacity:0;}}
.alertBox{font-size:15px;text-align: center;border-radius:5px;position: fixed;left:50%;top:50%;margin:-20px 0 0 -150px;background:#000;color:#fff;width:300px;height:40px;line-height:40px;-webkit-animation:boxfade 2s ease;-ms-animation:boxfade 2s ease;-o-animation:boxfade 2s ease; z-index:10001}
/*é®ç½©å±‚*/
.mask{background:#000;opacity:0.4;width:100%;height:150%;position:fixed;z-index:1000;left:0;top:0; display: none;}

/* åœ¨çº¿å®¢æœ */
#live800iconlink{float: none;
				border: 0px;
				color: #333;}
#usernamelist .weui-icon-cancel{color:#999;}
</style>
<link rel="stylesheet" href="../style/weui.css" tppabs="http://h5.9188.com/style/weui.css"/>
<link rel="stylesheet" href="../style/example.css" tppabs="http://h5.9188.com/style/example.css"/>
<body>
<article class="content">
	<section class="page__hd">
	   <div class="weui-flex">
	     <a class="weui-cell__back" href="../index.htm#type=index" tppabs="http://h5.9188.com/#type=index"></a>
	     <p class="weui-flex__item txt_center">9188è´¦æˆ·ç™»å½•</p>      
	   </div>    
	</section>
	<section class="logofont">
		<img src="images/logofont.png" tppabs="http://h5.9188.com/alone/images/logofont.png"/>
	</section>
	<section class="page__bd" id='login'>        
	  <div class="weui-cells weui-cells_form visible" style="margin-top:.8rem;">               
	    <div class="weui-cell">
	      <div class="weui-cell__hd"><label for="" class="weui-label">è´¦å·</label></div>
	      <div class="weui-cell__bd my_icon_box" id="usernamebox">
	      	<input class="weui-input" value="" placeholder="è¯·è¾“å…¥ç”¨æˆ·å/æ‰‹æœºå·" id="username" type="text" autocomplete="off">
	      	<i class="my-icon-delete delete-code" style='display:none;'></i>
	      </div>
	      <ul class="cp9188-datalist" id="usernamelist"  style="display: none;">
	          <!-- <li><a class="cp9188-datalist__bd" href="javascript:;">æµ‹è¯•å¸å·</a><i class="weui-icon-close"></i></li>
	          <li><a class="cp9188-datalist__bd" href="javascript:;">èŠ±ç”Ÿ</a><i class="weui-icon-close"></i></li>
	          <li><a class="cp9188-datalist__bd" href="javascript:;">ply12</a><i class="weui-icon-close"></i></li>
	          <li><a class="cp9188-datalist__bd" href="javascript:;">ply19</a><i class="weui-icon-close"></i></li>
	          <li><a class="cp9188-datalist__bd" href="javascript:;">ply21</a><i class="weui-icon-close"></i></li> -->
	      </ul>
	    </div>
	    <div class="weui-cell">
	      <div class="weui-cell__hd"><label for="" class="weui-label">å¯†ç </label></div>
	      <div class="weui-cell__bd my_icon_box">
	        <input class="weui-input" value="" placeholder="è¯·è¾“å…¥å¯†ç " id=password  type="password" autocomplete="off">
	        <i class="my-icon-delete delete-code" style='display:none;right:24px;'></i>
	        <i class="my-icon-eyes" id='eye' style='right:-8px;'></i>
	      </div>
	    </div>            
	  </div>
	  <div class="weui-btn-area">
	    <button class="weui-btn weui-btn_primary weui-btn_disabled"  id="loginBtn" disabled='true'>ç¡®å®š</button>
	  </div>
	  <div class="weui-footer">
	    <p class="weui-footer__links">
	      <a href="javascript:;" id="showIOSActionSheet" class="weui-footer__link gray">ç™»å½•é‡åˆ°é—®é¢˜ï¼Ÿ</a>
	    </p>
	  </div>	  
	</section>
</article> 
<div class="weui-btn-area contact">
  <a class="weui-btn weui-btn_plain-primary" style="width:110px;font-size:16px;" href="newregister.html" tppabs="http://h5.9188.com/alone/newregister.html" >ç«‹å³æ³¨å†Œ</a>
</div>
<div>
	<div class="weui-mask" id="iosMask" style="display: none"></div>
	<div class="weui-actionsheet" id="iosActionsheet">
		<div class="weui-actionsheet__menu">
	    	<div class="weui-actionsheet__cell"><a  href="newforgotpwd.html" tppabs="http://h5.9188.com/alone/newforgotpwd.html">å¿˜è®°å¯†ç </a></div>
	    	<!-- 
	    	<div class="weui-actionsheet__cell">
	    		<script language="javascript" src="http://chat8.live800.com/live800/chatClient/textButton.js?jid=4543042755&companyID=152373&configID=127313&codeType=custom"></script><script id='write' language="javascript">function writehtml(){var temptext=text_generate();document.getElementById('live127313').innerHTML=temptext;setTimeout('write.src',9000);}writehtml();</script>
			</div>
			 -->
			 <div class="weui-actionsheet__cell"><a href="javascript:if(confirm('http://5.9188.com/help/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://5.9188.com/help/'" tppabs="http://5.9188.com/help/">å¸®åŠ©ä¸­å¿ƒ</a></div>
	    </div>
	    <div class="weui-actionsheet__action">
	      <div class="weui-actionsheet__cell" id="iosActionsheetCancel">å–æ¶ˆ</div>
	    </div>
	</div>
</div>
<script src="../js/public/jquery-1.9.1.min.js" tppabs="http://h5.9188.com/js/public/jquery-1.9.1.min.js"></script>
<script src="../js/public/weui.min.js" tppabs="http://h5.9188.com/js/public/weui.min.js"></script>
<script src="../js/public/JQ.md5.js" tppabs="http://h5.9188.com/js/public/JQ.md5.js"></script>
<script>
$(function(){
    var wContact=$(document).height()-$('.content').outerHeight();
    var w=wContact-80;
    $('.contact').css('margin-top',w);
});
</script>
<script>

//å…¬ç”¨å¼¹å‡ºå±‚å’ŒåŠ è½½å±‚
var win_alert = alert;
window['alert'] = function (msg, loading) {
	if (!loading) {
		clearTimeout(window.alert.time);
		var obj = $('<div class="alertBox">' + msg + '</div>');
		$('body').append(obj);
		window.alert.time = setTimeout(function () {
			$(".alertBox").remove();
		}, 2000);
	} else {
		$('body').append($('<div class="alertBox"><div class="box_loading"><div class="loading_mask"></div></div>' + msg + '</div>'));
		$('.alertBox').css({"webkitAnimationName": "boxfade_loading", "opacity": 0.8});
		$('#mask').show();
	}
};
var remove_alert = function () {
	$('.alertBox').remove();
	$('#mask').hide();
};

$(function () {
	if(document.domain == 'http://h5.9188.com/alone/1ydb.5.9188.com'){
		alert('ç™»å½•å¤±æ•ˆ,è¯·é‡æ–°è¿›å…¥')
		setTimeout(function(){
			location.href = localStorage.getItem('target_url')
		},1e3);
		return;
	}
	var user_name = localStorage.getItem("username");
	!!user_name && $('#username').val(user_name).next().show();//å¡«è£…ç”¨æˆ·å
	$('#password').keyup(function(){
		if($(this).val()){
			$('#loginBtn').removeAttr('disabled');
			$('#loginBtn').removeClass('weui-btn_disabled');
			$(this).next('i').css({'display':'block'});
		}else{
			$('#loginBtn').attr('disabled','true');
			$('#loginBtn').addClass('weui-btn_disabled');
			$(this).next('i').css({'display':'none'});
		}
	})
	$("#login").off().keydown(function(e){
		if(e.which == 13){//æŒ‰å›è½¦çš„æ—¶å€™æäº¤ç™»å½•
			MiniLogin();
			return false;
		}
	});
	$('#login .s3').bind('click', function(){
		$(this).find('input').focus();
		$(this).addClass('s3cur').siblings().removeClass('s3cur');
	});
	
	//å¿˜è®°å¯†ç 
	var $iosMask = $('#iosMask');
    var winHeight = $(window).height();
    var bodyScroll = $('body').scrollTop();
    $("#showIOSActionSheet").click(function () {
        if(winHeight != $(window).height() || bodyScroll != $('body').scrollTop() ){
            setTimeout(function(){
                $iosMask.fadeIn(200);
                $("#iosActionsheet").slideDown(200);
            }, 500 )
        }else{
            $iosMask.fadeIn(200);
            $("#iosActionsheet").slideDown(200);
        }
    });
    $("#iosActionsheetCancel").click(function(){
          $iosMask.fadeOut(200);
          $("#iosActionsheet").slideUp(200);
    })
    $iosMask.click(function(){
        $iosMask.fadeOut(200);
        $("#iosActionsheet").slideUp(200);
    })
    //å¿˜è®°å¯†ç 

	$('#loginBtn').bind('click', function(){MiniLogin();});
	$('.s3 input').bind('keyup', function(){$(this).val() != '' && $(this).next().show() || $(this).next().hide();});
	$('.s3 em').bind('click', function(){$(this).hide().prev().val('');});
	$('#eye').click(function(){
		var eyes = $(this).hasClass('my-icon-eyes');
		if(eyes){
			$(this).removeClass('my-icon-eyes').addClass('my-icon-eyes_on');
			$(this).prevAll('input').attr('type','text');
		}else{
			$(this).removeClass('my-icon-eyes_on').addClass('my-icon-eyes');
			$(this).prevAll('input').attr('type','password');
		}
	})
	
	//ç™»å½•è´¦æˆ·åä¸‹æ‹‰æ¡†
	var unlist =function(){
		 if(localStorage.getItem('unlist')){
				var unlist = JSON.parse(localStorage.getItem('unlist'));
				var html = ''
				if(unlist.length > 5){
					unlist.length = 5
				}
				for(var i=0;i<unlist.length;i++){
					html += '<li><a class="cp9188-datalist__bd" href="javascript:;">'+unlist[i]+'</a><i class="weui-icon-close"></i></li>'
				}
				$('#usernamelist').html(html);
			} 
	 }()
	 $("body>*").bind("click",function(){})
    $("#username").click(function(event){
        $("#usernamelist").toggle();
        $(document).one('click',function(event){
            var eo=$(event.target);
            if($("#usernamelist").css('display') == 'block' ){
           	 $('#usernamelist').hide()
            }   
        });
        event.stopPropagation();
    });
    $("#usernamelist").delegate('li>a' ,'click',function(){
        var value=$(this).html();
        $("#username").val(value);
    })
    $("#usernamelist").delegate('li>i' ,'click',function(){
        $(this).parent("li").remove();
        var unlist = JSON.parse(localStorage.getItem('unlist'));
        var a = $(this).prev().html();
         var arr = [];
         for(i in unlist){
       	 if(a != unlist[i]){
       		 arr.push(unlist[i]);
       	 }
        }
        localStorage.setItem('unlist',JSON.stringify(arr));
    })
    $("#username").keyup(function(){
		if($(this).val()){
			$(this).next('i').css({'display':'block'}); 
		}else{
			$(this).next('i').css({'display':'none'}); 
		}
	})
    $("#username").focus(function(event){
		var ev = event || window.event;
		ev.stopPropagation();
		if($(this).val()){
			$(this).next('i').css({'display':'block'});
		}else{
			$(this).next('i').css({'display':'none'}); 
		}
	})
	$("#password").focus(function(event){
		var ev = event || window.event;
		ev.stopPropagation();
		if( $(this).val() ){
			$(this).next('i').css({'display':'block'});
		}else{
			$(this).next('i').css({'display':'none'}); 
		}
	})
	$('.delete-code').click(function(event){
		var ev = event || window.event;
		ev.stopPropagation();
		$(this).prev().val('');
		$(this).css({'display':'none'});
		$(this).prev().focus();
		if(!$('#password').val()){
			$('#loginBtn').attr('disabled','true');
			$('#loginBtn').addClass('weui-btn_disabled');
		}
	})
	$("#password").blur(function(event){
		setTimeout(function(){
			$("#password").next('i').css({'display':'none'});
		},50)
	})
	$("#username").blur(function(event){
		setTimeout(function(){
			$("#username").next('i').css({'display':'none'});
		},50) 
	})
});

//åˆ¤æ–­è®¾å¤‡
var browser={
	    versions:function(){
	        var u = navigator.userAgent, app = navigator.appVersion;
	        return {
	            mobile: !!u.match(/AppleWebKit.*Mobile.*/), //æ˜¯å¦ä¸ºç§»åŠ¨ç»ˆç«¯
	            ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //iosç»ˆç«¯
	            android: u.indexOf('Android') > -1 || u.indexOf('Adr') > -1 || u.indexOf('Linux') > -1, //androidç»ˆç«¯
	        };
	    }(),
}
//åˆ¤æ–­è®¾å¤‡

//æ•°ç»„å»é‡
var redelete = function(arr){
	var res = [];
	 var json = {};
	 for(var i = 0; i < arr.length; i++){
	  if(!json[arr[i]]){
		res.push(arr[i]);
		json[arr[i]] = 1;
	  }
	 }
	 return res;
}

var MiniLogin = function(){
	var uname = $("#username").val();
    var upwd = $("#password").val();
    if (uname == "") {
        alert('è¯·è¾“å…¥ç”¨æˆ·å');
        return false;
    }else if (upwd == "") {
    	alert('è¯·è¾“å…¥å¯†ç ');
        return false;
    }else{
    	alert('ç™»å½•ä¸­ï¼Œè¯·ç¨åï¼','loading');
    	/* var mjmyz = 'http://www.9188.com /';
    	var hjmyz = 'http://www.huishuaka.com/';
    	var pwd = $.md5(upwd + mjmyz);
    	var merchantacctid = browser.versions.android?'130313002':'130313003';
    	var key = 'A9FK25RHT487ULMI';
    	var newpwd = $.md5(upwd + hjmyz);
    	var signmsg = $.md5('signtype='+1+'&merchantacctid='+merchantacctid+'&uid='+uname+'&pwd='+pwd+'&newpwd='+newpwd+'&key='+key)
		var mtype = browser.versions.android?'1':'2';
    	var rnd = Math.random();
    	var data ={
			'uid': uname,
			'pwd': pwd,
			'newpwd': newpwd,
			'merchantacctid': merchantacctid,
			'signtype': 1,
			'signmsg': signmsg.toUpperCase(),
			'mtype': mtype,
			'appversion': '4.4.0',
			'rnd': rnd,
			'source': 3000
		} */
		var data = "uid=" + encodeURIComponent(uname)+ "&pwd=" + encodeURIComponent(upwd)+ "&source=3000";
	    $.ajax({
	    	/* url: 'http://h5.9188.com/user/mlogin.go', */
	    	url: 'http://h5.9188.com/user/login.go',
	        type: "POST",
	        dataType : "xml",
	        data: data,
	        cache: false,
	        success : function (xml) {
	        	remove_alert();
	        	var R = $(xml).find("Resp");
				var code = R.attr("code");
				var desc = R.attr("desc");
				if (code == "0") {
					localStorage.setItem("username", uname);
					if(localStorage.getItem('unlist')){
						var unlist = JSON.parse(localStorage.getItem('unlist'));
						unlist.unshift(uname);
						var list = redelete(unlist)
						localStorage.setItem('unlist',JSON.stringify(list));
					}else{
						var unlist = [uname]
						localStorage.setItem('unlist',JSON.stringify(unlist));
					}
					alert(desc);
					setTimeout(function(){
						window.location.replace('../index.htm'/*tpa=http://h5.9188.com/*/);
					},1e3);
				}else{
					alert(desc);
				}
	        },error : function (){
	        	remove_alert();alert('ç½‘ç»œå¼‚å¸¸è¯·åˆ·æ–°é‡è¯•');
	        	return
	        }		        
	    });
    }
}
</script>
</body>